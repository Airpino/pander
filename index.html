<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>pander: An R Pandoc writer</title>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
  
  <link rel="stylesheet" href="stylesheets/base.css" />
  <link rel="stylesheet" href="stylesheets/skeleton.css" />
  <link rel="stylesheet" href="stylesheets/layout.css" />
  <link rel="stylesheet" href="stylesheets/fonts.css" />
  <link rel="stylesheet" href="stylesheets/slimbox2.css" />
  <link rel="stylesheet" href="stylesheets/custom.css" />
  <link rel="stylesheet" href="stylesheets/caption.css"/>
  
  <link rel="shortcut icon" href="images/favicon.gif" />
  <link rel="apple-touch-icon" href="images/apple-touch-icon.png" />
  <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png" />
  
  <script type="text/javascript" src="javascripts/jquery-1.7.2.min.js"></script>
  <script type="text/javascript" src="javascripts/tabs.js"></script>  <!--remove-->
  <script type="text/javascript" src="javascripts/custom.js"></script>
  <script type="text/javascript" src="javascripts/slimbox2.js"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
  <script type="text/javascript" src="javascripts/jcaption.min.js" /></script>
</head>
<body>
<div id="header">
<h1 class="title"><a href="https://github.com/daroczig/pander">pander: An R Pandoc writer</a></h1>
</div>
<p><strong>pander</strong> is an <a href="http://r-project.org">R</a> package containing <a href="#helper-functions">helpers</a> to return <a href="http://johnmacfarlane.net/pandoc/">Pandoc</a>'s markdown of user specified format or <em>automatically</em> of several type of <a href="#generic-pander-method"><strong>R objects</strong></a>.</p>
<p>The package is also capable of exporting/converting complex Pandoc documents (reports) in three ways ATM:</p>
<ul>
<li><p>create somehow a markdown text file (e.g. with <code>brew</code>, <code>knitr</code> or any scripts of yours, maybe with <code>Pandoc.brew</code> - see just below) and transform that to other formats (like HTML, odt, pdf, docx etc.) with <code>Pandoc.convert</code></p></li>
<li><p>users might write some reports in <a href="http://cran.r-project.org/web/packages/brew/index.html">brew</a> syntax resulting in a pretty <em>Pandoc</em> document (where each R object are transformed to nicely formatted table, list etc.) and also in a <strong>bunch of formats</strong> (like HTML, odt, pdf, docx etc.) automatically.</p>
<p><em>Example</em>: this <a href="https://github.com/daroczig/pander/blob/master/README.md"><code>README.md</code></a> is cooked with <code>Pandoc.brew</code> based on <a href="https://github.com/daroczig/pander/blob/master/inst/README.brew"><code>inst/README.brew</code></a> and also exported to <a href="http://daroczig.github.com/pander/">HTML</a>. Details can be found <a href="#brew-to-pandoc">below</a> or head directly to <a href="#examples">examples</a>.</p></li>
</ul>
<!-- endlist -->

<ul>
<li>or users might create a report in a live R session by adding some R objects and paragraphs to a <code>Pandoc</code> reference class object. Details can be found <a href="#live-report-generation">below</a>.</li>
</ul>
<p><strong>How it is differ from Sweave, brew, knitr, R2HTML etc.?</strong></p>
<ul>
<li>no need for calling <code>ascii</code>, <code>xtable</code>, <code>Hmisc</code>, <code>tables</code> etc. to transform an R object to <code>HTML</code>, <code>tex</code> etc. as <code>pander</code> results in Pandoc's <em>markdown</em> which can be converted to almost any text document format (like: pdf, HTML, odt, docx, textile, asciidoc, reStructuredText etc.). Conversion can be done automatically after calling <code>pander</code> reporting functions (<a href="#brew-to-pandoc">Pander.brew</a> or <a href="#live-report-generation">Pandoc</a>).</li>
<li>based on the above <em>no &quot;traditional&quot; R console output</em> is shown in the resulting document (nor in markdown, nor in exported docs) but <strong>all R objects are transformed to tables, list etc</strong>. Well, there is an option (<code>show.src</code>) to show the original R commands before the formatted output, and <code>pander</code>˛calls can be also easily tweaked (just file an issue) to return <code>print</code>ed R objects - if you would need that in some strange situation - like writing an R tutorial. But <strong>I really think that nor R code, nor raw R results have anything to do with an exported report</strong> :)</li>
<li><em>graphs/plots</em> are recognized in blocks of R commands without any special setting or marks around code block and saved to disk in a <code>png</code> file linked in the resulting document. This means if you create a report (e.g. <code>brew</code> a text file) and export it to pdf/docx etc. all the plots/images would be there. There are some parameters to specify the resolution of the image and also the type (e.g. <code>jpg</code>, <code>svg</code> or <code>pdf</code>).</li>
<li><code>pander</code>˛uses its build in (IMHO quite decent) <strong>caching</strong>. This means that if evaluation of some R commands take too much time (which can be set by option/parameter), then the results are saved in a file and returned from there on next exact R code's evaluation. This caching algorithm tries to be <strong>smart</strong> as checks not only the passed R sources, but <em>all variables</em> inside that and saves the hash of those. This is a quite secure way of caching, but if you would encounter any issues, just switch off the cache. I've not seen any issues :)</li>
<li><code>knitr</code> <em>support</em> is coming too, for details see my <a href="https://github.com/daroczig/pander/blob/master/TODO.md">TODO list</a> <strong>Update</strong>: just use <code>knitr</code> to generate markdown and pass that to <code>Pandoc.convert</code></li>
</ul>
<h1 id="installation">Installation</h1>
<p>Currently, this package is hosted only on <a href="https://github.com/daroczig/pander">GitHub</a>.</p>
<p>Until this gets on <a href="cran.r-project.org">CRAN</a>, you can install it via nifty function from <code>devtools</code> package:</p>
<pre><code>library(devtools)
install_github(&#39;pander&#39;, &#39;daroczig&#39;)</code></pre>
<p>Or download the <a href="https://github.com/daroczig/pander/zipball/master">sources in a zip file</a> and build manually. If you're running R on Windows, you need to install <a href="http://cran.stat.ucla.edu/bin/windows/Rtools/">Rtools</a>.</p>
<h2 id="depends">Depends</h2>
<p><code>pander</code> heavily builds on <a href="http://johnmacfarlane.net/pandoc">Pandoc</a> which should be <strong>pre-installed</strong> before trying to convert your reports to <a href="http://johnmacfarlane.net/pandoc/">different formats</a>. Although <strong>main functions work without Pandoc</strong>, e.g. you can generate a markdown formatted report via <a href="#brew-to-pandoc">Pandoc.brew</a> or the custom <a href="#live-report-generation">reference class</a>, but I would really suggest to install that really great piece of software!</p>
<p><del>And as <code>pander</code> and <code>rapport</code> are quite Siamese twins, you would need an <strong>up-to-date</strong> version of <a href="http://rapport-package.info">rapport</a> most likely installed from <a href="https://github.com/aL3xa/rapport">Github</a>.</del> <code>pander</code> now can work independently from <code>rapport</code>.</p>
<p>Now you would only need a few cool packages from CRAN:</p>
<ul>
<li><a href="http://cran.r-project.org/web/packages/brew/index.html">brew</a> for literate programming,</li>
<li><a href="http://cran.r-project.org/web/packages/digest/index.html">digest</a> to compute hashes while caching,</li>
<li><a href="http://cran.r-project.org/web/packages/parser/index.html">parser</a> to identify variables in passed R commands,</li>
<li><del><a href="http://cran.r-project.org/web/packages/evaluate/index.html">evaluate</a></del></li>
<li>besides <a href="http://www.r-project.org/">R</a> of course!</li>
</ul>
<h1 id="helper-functions">Helper functions</h1>
<p>There are a bunch of helper functions in <code>pander</code> which return user specified inputs in Pandoc format. You could find these functions starting with <code>pandoc.</code>. For example <code>pandoc.strong</code> would return the passed characters with strong emphasis. E.g.:</p>
<pre class="rout"><code>&gt; pandoc.strong(&#39;FOO&#39;)
**FOO**&gt;
&gt; pandoc.strong.return(&#39;FOO&#39;)
[1] &quot;**FOO**&quot;</code></pre>
<p>As it can be seen here <code>pandoc</code> functions generally prints to console and do not return anything. If you want the opposite (get the Pandoc format as a string): call each function ending in <code>.return</code> - like the second call in the above example. For details please check documentation, e.g. <code>?pandoc.strong</code>.</p>
<p>Of course there are more complex functions too. Besides verbatim texts, (image) links or footnotes (among others) there are a helper e.g. for <strong>lists</strong>:</p>
<pre class="rout"><code>&gt; l &lt;- list(&quot;First list element&quot;, paste0(1:5, &#39;. subelement&#39;), &quot;Second element&quot;, list(&#39;F&#39;, &#39;B&#39;, &#39;I&#39;, c(&#39;phone&#39;, &#39;pad&#39;, &#39;talics&#39;)))
&gt; pandoc.list(l, &#39;roman&#39;)</code></pre>
<p>Which returns:</p>
<pre><code>
I. First list element 
    I. 1. subelement 
    II. 2. subelement 
    III. 3. subelement 
    IV. 4. subelement 
    V. 5. subelement  
II. Second element 
    I. F 
    II. B 
    III. I 
        I. phone 
        II. pad 
        III. talics   

&lt;!-- end of list --&gt;
</code></pre>
<p><code>pandoc</code> can return <strong>tables</strong> in <a href="http://johnmacfarlane.net/pandoc/README.html#tables">three formats</a>:</p>
<ul>
<li>The default style is the <code>multiline</code> format as most features (e.g. multi-line cells and alignment) are available in there.</li>
</ul>
<pre class="rout"><code>&gt; m &lt;- mtcars[1:2, 1:3]
&gt; pandoc.table(m)

------------------------------------
                  mpg   cyl   disp  
----------------- ----- ----- ------
**Mazda RX4**     21    6     160   

**Mazda RX4 Wag** 21    6     160   
------------------------------------
</code></pre>
<ul>
<li><code>simple</code> tables do not support line breaks in cells:</li>
</ul>
<pre class="rout"><code>&gt; pandoc.table(m, style = &quot;simple&quot;)

                  mpg   cyl   disp  
----------------- ----- ----- ------
**Mazda RX4**     21    6     160   
**Mazda RX4 Wag** 21    6     160   
</code></pre>
<ul>
<li><code>grid</code> format are really handy for <a href="http://emacswiki.org/emacs/TableMode">emacs</a> users but do support line breaks inside cells, but do not tolerate cell alignment:</li>
</ul>
<pre class="rout"><code>&gt; pandoc.table(m, style = &quot;grid&quot;)

+-------------------+-------+-------+--------+
|                   | mpg   | cyl   | disp   |
+===================+=======+=======+========+
| **Mazda RX4**     | 21    | 6     | 160    |
+-------------------+-------+-------+--------+
| **Mazda RX4 Wag** | 21    | 6     | 160    |
+-------------------+-------+-------+--------+
</code></pre>
<p>Besides the <code>style</code> parameter there are several other ways to tweak the output like <code>decimal.mark</code> or <code>digits</code>. And of course it's really easy to add a <strong>caption</strong>:</p>
<pre class="rout"><code>&gt; pandoc.table(m, style = &quot;grid&quot;, caption = &quot;Hello caption!&quot;)

+-------------------+-------+-------+--------+
|                   | mpg   | cyl   | disp   |
+===================+=======+=======+========+
| **Mazda RX4**     | 21    | 6     | 160    |
+-------------------+-------+-------+--------+
| **Mazda RX4 Wag** | 21    | 6     | 160    |
+-------------------+-------+-------+--------+

Table: Hello caption!
</code></pre>
<p><code>pandoc.table</code>˙can deal with the problem of really <strong>wide tables</strong>. Ever had an issue in LaTeX or MS Word when tried to print a correlation matrix of 40 variables? Not a problem any more as <code>pandoc.table</code> splits up the table if wider then 80 characters and handles caption too:</p>
<pre class="rout"><code>&gt; pandoc.table(mtcars[1:2, ], style = &quot;grid&quot;, caption = &quot;Hello caption!&quot;)

+-------------------+-------+-------+--------+------+--------+------+
|                   | mpg   | cyl   | disp   | hp   | drat   | wt   |
+===================+=======+=======+========+======+========+======+
| **Mazda RX4**     | 21    | 6     | 160    | 110  | 3.9    | 2.6  |
+-------------------+-------+-------+--------+------+--------+------+
| **Mazda RX4 Wag** | 21    | 6     | 160    | 110  | 3.9    | 2.9  |
+-------------------+-------+-------+--------+------+--------+------+

Table: Hello caption! (continued below)

 

+-------------------+--------+------+------+--------+--------+
|                   | qsec   | vs   | am   | gear   | carb   |
+===================+========+======+======+========+========+
| **Mazda RX4**     | 16     | 0    | 1    | 4      | 4      |
+-------------------+--------+------+------+--------+--------+
| **Mazda RX4 Wag** | 17     | 0    | 1    | 4      | 4      |
+-------------------+--------+------+------+--------+--------+
</code></pre>
<p>And too wide cells are also split by line breaks. E.g.:</p>
<pre class="rout"><code>&gt; pandoc.table(data.frame(id=1:2, value=c(&#39;FOO&#39;, &#39;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&#39;)))

----------------------------------
id   value                        
---- -----------------------------
1    FOO                          

2    Lorem ipsum dolor sit amet,  
     consectetur adipisicing elit,
     sed do eiusmod tempor        
     incididunt ut labore et      
     dolore magna aliqua. Ut enim 
     ad minim veniam, quis nostrud
     exercitation ullamco laboris 
     nisi ut aliquip ex ea commodo
     consequat. Duis aute irure   
     dolor in reprehenderit in    
     voluptate velit esse cillum  
     dolore eu fugiat nulla       
     pariatur. Excepteur sint     
     occaecat cupidatat non       
     proident, sunt in culpa qui  
     officia deserunt mollit anim 
     id est laborum.              
----------------------------------
</code></pre>
<h1 id="generic-pander-method">Generic pander method</h1>
<p><code>pander</code> or <code>pandoc</code> (call as you wish) can deal with a bunch of R object types as being a pandocized <code>S3</code> method with a variety of classes.</p>
<p>Besides simple types (vectors, matrices, tables or data frames) lists might be interesting for you:</p>
<pre class="rout"><code>&gt; pander(list(a=1, b=2, c=table(mtcars$am), x=list(myname=1,2), 56))

  * **a**: *1*
  * **b**: *2*
  * **c**:

    -------
    0   1
    --- ---
    19  13
    -------

  * **x**:

      * **myname**: *1*
      * *2*

  * *56*

&lt;!-- end of list --&gt;
</code></pre>
<p>A nested list can be seen above with a table and all (optional) list names inside. As a matter of fact <code>pander.list</code> is the default method of <code>pander</code> too, see:</p>
<pre class="rout"><code>&gt; x &lt;- chisq.test(table(mtcars$am, mtcars$gear))
&gt; class(x) &lt;- &quot;I&#39;ve never heard of!&quot;
&gt; pander(x)
 **WARNING**^[Chi-squared approximation may be incorrect]

  * **statistic**: *21*
  * **parameter**: *2*
  * **p.value**: *2.8e-05*
  * **method**: Pearson&#39;s Chi-squared test
  * **data.name**: table(mtcars$am, mtcars$gear)
  * **observed**:

    -----------------
          3   4   5
    ----- --- --- ---
    **0** 15  4   0

    **1** 0   8   5
    -----------------

  * **expected**:

    -----------------
          3   4   5
    ----- --- --- ---
    **0** 8.9 7.1 3.0

    **1** 6.1 4.9 2.0
    -----------------

  * **residuals**:

    --------------------
          3    4    5
    ----- ---- ---- ----
    **0** 2.0  -1.2 -1.7

    **1** -2.5 1.4  2.1
    --------------------

  * **stdres**:

    --------------------
          3    4    5
    ----- ---- ---- ----
    **0** 4.4  -2.3 -2.9

    **1** -4.4 2.3  2.9
    --------------------

&lt;!-- end of list --&gt;
</code></pre>
<p>So <code>pander</code> showed a not known class in an (almost) user-friendly way. And we got some warnings too styled with <a href="http://johnmacfarlane.net/pandoc/README.html#footnotes">Pandoc <strong>footnote</strong></a>! If that document is exported to e.g. <code>HTML</code> or <code>pdf</code>, then the error/warning message could be found on the bottom of the page with a link. <em>Note</em>: there were two warnings in the above call - both captured and returned! Well, this is the feature of <code>Pandoc.brew</code>, see <a href="#brew-to-pandoc">below</a>.</p>
<p>The output of different <strong>statistical methods</strong> are tried to be prettyfied. Some examples:</p>
<pre class="rout"><code>&gt; pander(ks.test(runif(50), runif(50)))

---------------------------------------------------
 Test statistic   P value   Alternative hypothesis 
---------------- --------- ------------------------
      0.2          0.27           two-sided        
---------------------------------------------------

Table: Two-sample Kolmogorov-Smirnov test: `runif(50)` and `runif(50)`

&gt; pander(chisq.test(table(mtcars$am, mtcars$gear)))

-------------------------------
 Test statistic   df   P value 
---------------- ---- ---------
       21         2    2.8e-05 
-------------------------------

Table: Pearson&#39;s Chi-squared test: `table(mtcars$am, mtcars$gear)`

 **WARNING**^[Chi-squared approximation may be incorrect]

&gt; pander(t.test(extra ~ group, data = sleep))

--------------------------------------------------------
 Test statistic   df   P value   Alternative hypothesis 
---------------- ---- --------- ------------------------
      -1.9        18    0.079          two.sided        
--------------------------------------------------------

Table: Welch Two Sample t-test: `extra` by `group`

&gt; ## Dobson (1990) Page 93: Randomized Controlled Trial (examples from: ?glm)
&gt; counts &lt;- c(18,17,15,20,10,20,25,13,12)
&gt; outcome &lt;- gl(3,1,9)
&gt; treatment &lt;- gl(3,3)
&gt; m &lt;- glm(counts ~ outcome + treatment, family=poisson())
&gt; pander(m)

------------------------------------------------------------
                 Estimate   Std. Error   z value   Pr(&gt;|z|) 
--------------- ---------- ------------ --------- ----------
**(Intercept)**  3.0e+00     1.7e-01     1.8e+01   5.4e-71  

   **outcome2**  -4.5e-01    2.0e-01    -2.2e+00   2.5e-02  

   **outcome3**  -2.9e-01    1.9e-01    -1.5e+00   1.3e-01  

 **treatment2**  1.3e-15     2.0e-01     6.7e-15   1.0e+00  

 **treatment3**  1.4e-15     2.0e-01     7.1e-15   1.0e+00  
------------------------------------------------------------

Table: Fitting generalized (poisson/log) linear model: counts ~ outcome + treatment

&gt; pander(anova(m))

------------------------------------------------------
               Df   Deviance   Resid. Df   Resid. Dev 
------------- ---- ---------- ----------- ------------
     **NULL**  NA      NA          8          10.6    

  **outcome**  2    5.5e+00        6          5.1     

**treatment**  2    2.7e-15        4          5.1     
------------------------------------------------------

Table: Analysis of Deviance Table

&gt; pander(aov(m))

--------------------------------------------------------
               Df   Sum Sq   Mean Sq   F value   Pr(&gt;F) 
------------- ---- -------- --------- --------- --------
  **outcome**  2   9.3e+01   4.6e+01   2.2e+00    0.22  

**treatment**  2   8.4e-31   4.2e-31   2.0e-32    1.00  

**Residuals**  4   8.3e+01   2.1e+01     NA        NA   
--------------------------------------------------------

Table: Analysis of Variance Model

&gt; pander(prcomp(USArrests))

---------------------------------------
             PC1   PC2    PC3    PC4   
------------ ----- ------ ------ ------
**Murder**   0.042 -0.045 0.080  -0.995

**Assault**  0.995 -0.059 -0.068 0.039 

**UrbanPop** 0.046 0.977  -0.201 -0.058

**Rape**     0.075 0.201  0.974  0.072 
---------------------------------------

Table: Principal Components Analysis

----------------------------------------------------------
                           PC1     PC2     PC3     PC4    
-------------------------- ------- ------- ------- -------
**Standard deviation**     8.4e+01 1.4e+01 6.5e+00 2.5e+00

**Proportion of Variance** 9.7e-01 2.8e-02 5.8e-03 8.5e-04

**Cumulative Proportion**  9.7e-01 9.9e-01 1.0e+00 1.0e+00
----------------------------------------------------------

&gt; pander(density(mtcars$hp))

------------------------------------------
             Coordinates   Density values 
----------- ------------- ----------------
   **Min.**      -32          5.0e-06     

**1st Qu.**      81           4.1e-04     

 **Median**      194          1.7e-03     

   **Mean**      194          2.2e-03     

**3rd Qu.**      306          4.1e-03     

   **Max.**      419          6.1e-03     
------------------------------------------

Table: Kernel density of *mtcars$hp* (bandwidth: 28.04104)
</code></pre>
<p>And of course tables are formatted (e.g. auto add of line breaks and splitting up tables) nicely:</p>
<pre class="rout"><code>&gt; set.caption(&#39;Foo Bar&#39;)
&gt; pander(data.frame(id=1:2, value=c(&#39;FOO&#39;, &#39;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&#39;)))

----------------------------------
id   value                        
---- -----------------------------
1    FOO                          

2    Lorem ipsum dolor sit amet,  
     consectetur adipisicing elit,
     sed do eiusmod tempor        
     incididunt ut labore et      
     dolore magna aliqua. Ut enim 
     ad minim veniam, quis nostrud
     exercitation ullamco laboris 
     nisi ut aliquip ex ea commodo
     consequat. Duis aute irure   
     dolor in reprehenderit in    
     voluptate velit esse cillum  
     dolore eu fugiat nulla       
     pariatur. Excepteur sint     
     occaecat cupidatat non       
     proident, sunt in culpa qui  
     officia deserunt mollit anim 
     id est laborum.              
----------------------------------

Table: Foo Bar
</code></pre>
<h1 id="brew-to-pandoc">Brew to Pandoc</h1>
<p>Everyone knows and possibly uses <a href="http://cran.r-project.org/web/packages/brew/index.html">brew</a> but if you would need some smack, the following links really worth visiting:</p>
<ul>
<li><a href="http://www.slideshare.net/xavierguardiola/building-a-reporting-sytem-with-brew">slides on &quot;Building a reporting sytem with BREW&quot;</a></li>
<li><a href="http://learnr.wordpress.com/2009/09/09/brew-creating-repetitive-reports/">learnr blogpost on brew</a></li>
</ul>
<p><strong>In short</strong>: a <code>brew</code> document is a simple text file with some special tags. <code>Pandoc.brew</code> uses only two of them internally - but of course you could use <code>brew templates</code> (<code>&lt;\%\%...\%\%&gt;</code>) too:</p>
<ul>
<li><code>&lt;\% ... \%&gt;</code> (without the backslash) stand for running R calls</li>
<li><code>&lt;\%= ... \%&gt;</code> (without the backslash) does pretty the same but applies <code>pander</code> to the returning R object (instead of <code>cat</code> like the original <code>brew</code> function does). So putting there any R object would return is a nice Pandoc markdown format with all possible messages etc.</li>
</ul>
<p>This latter tries to be smart in some ways:</p>
<ul>
<li>a block (R commands between the tags) could return values in any part of the block</li>
<li>plots and images are grabbed in the document, rendered to a <code>png</code> file and <code>pander</code> method would result in a Pandoc markdown formatted image link (so the image would be shown/included in the exported document).</li>
<li>all warnings/messages and errors are recorded in the blocks and returned in the document as a footnote</li>
<li>all heavy R commands (e.g. those taking more then 0.1 sec to evaluate) are <strong>cached</strong> so re<code>brew</code>ing a report would not result in a coffee break.</li>
</ul>
<p>This document was generated by <code>Pandoc.brew</code> based on <a href="https://github.com/daroczig/pander/blob/master/inst/README.brew"><code>inst/README.brew</code></a> so the above examples were generated automatically - which could be handy while writing some nifty statistical reports :)</p>
<pre><code>Pandoc.brew(system.file(&#39;README.brew&#39;, package=&#39;pander&#39;))</code></pre>
<p><code>Pandoc.brew</code> could cook a file (default) or work with a character vector provided in the <code>text</code> argument. The output is set to <code>stdout</code> by default, it could be tweaked to write result to a text file and run Pandoc on that to create a <code>HTML</code>, <code>odt</code>, <code>docx</code> or other document.</p>
<p>To export a brewed file to other then Pandoc's markdown, please use the <code>convert</code> parameter. For example (please disregard the backslash in front of the percent sign):</p>
<pre class="sourceCode r"><code class="sourceCode r">text &lt;- <span class="kw">paste</span>(<span class="st">&#39;# Header&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="st">&#39;What a lovely list:</span><span class="ch">\n</span><span class="st">&lt;\%=as.list(runif(10))\%&gt;&#39;</span>, <span class="st">&#39;A wide table:</span><span class="ch">\n</span><span class="st">&lt;\%=mtcars[1:3, ]\%&gt;&#39;</span>, <span class="st">&#39;And a nice chart:</span><span class="ch">\n\n</span><span class="st">&lt;\%=plot(1:10)\%&gt;&#39;</span>, <span class="dt">sep =</span> <span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>)
<span class="kw">Pandoc.brew</span>(<span class="dt">text =</span> text, <span class="dt">output =</span> <span class="kw">tempfile</span>(), <span class="dt">convert =</span> <span class="st">&#39;html&#39;</span>)
<span class="kw">Pandoc.brew</span>(<span class="dt">text =</span> text, <span class="dt">output =</span> <span class="kw">tempfile</span>(), <span class="dt">convert =</span> <span class="st">&#39;pdf&#39;</span>)</code></pre>
<p>Of course a text file could work as input (by default) the above example uses <code>text</code> parameter as a reproducible example. For example brewing this README with all R chunks and converted to html, please run:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Pandoc.brew</span>(<span class="kw">system.file</span>(<span class="st">&#39;README.brew&#39;</span>, <span class="dt">package=</span><span class="st">&#39;pander&#39;</span>), <span class="dt">output =</span> <span class="kw">tempfile</span>(), <span class="dt">convert =</span> <span class="st">&#39;html&#39;</span>)</code></pre>
<p>And there are some package bundled examples too.</p>
<h2 id="examples">Examples</h2>
<p>The package comes bundled with some examples for <code>Pandoc.brew</code> to let users check out its features pretty fast. These are:</p>
<ul>
<li><a href="https://github.com/daroczig/pander/blob/master/inst/examples/minimal.brew">minimal.brew</a></li>
<li><a href="https://github.com/daroczig/pander/blob/master/inst/examples/short-code-long-report.brew">short-code-long-report.brew</a></li>
</ul>
<p>To <code>brew</code> these examples on your machine try to run the followings.:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Pandoc.brew</span>(<span class="kw">system.file</span>(<span class="st">&#39;examples/minimal.brew&#39;</span>, <span class="dt">package=</span><span class="st">&#39;pander&#39;</span>))
<span class="kw">Pandoc.brew</span>(<span class="kw">system.file</span>(<span class="st">&#39;examples/minimal.brew&#39;</span>, <span class="dt">package=</span><span class="st">&#39;pander&#39;</span>), <span class="dt">output =</span> <span class="kw">tempfile</span>(), <span class="dt">convert =</span> <span class="st">&#39;html&#39;</span>)

<span class="kw">Pandoc.brew</span>(<span class="kw">system.file</span>(<span class="st">&#39;examples/short-code-long-report.brew&#39;</span>, <span class="dt">package=</span><span class="st">&#39;pander&#39;</span>))
<span class="kw">Pandoc.brew</span>(<span class="kw">system.file</span>(<span class="st">&#39;examples/short-code-long-report.brew&#39;</span>, <span class="dt">package=</span><span class="st">&#39;pander&#39;</span>), <span class="dt">output =</span> <span class="kw">tempfile</span>(), <span class="dt">convert =</span> <span class="st">&#39;html&#39;</span>)</code></pre>
<p>For easy access I have uploaded some exported documents of the above examples:</p>
<ul>
<li>minimal.brew: <a href="minimal.md">markdown</a> <a href="http://daroczig.github.com/pander/minimal.html">html</a> <a href="http://daroczig.github.com/pander/minimal.pdf">pdf</a> <a href="http://daroczig.github.com/pander/minimal.odt">odt</a> <a href="http://daroczig.github.com/pander/minimal.docx">docx</a></li>
<li>short-code-long-report.brew: <a href="http://daroczig.github.com/pander/short-code-long-report.md">markdown</a> <a href="http://daroczig.github.com/pander/short-code-long-report.html">html</a> <a href="http://daroczig.github.com/pander/short-code-long-report.pdf">pdf</a> <a href="http://daroczig.github.com/pander/short-code-long-report.odt">odt</a> <a href="http://daroczig.github.com/pander/short-code-long-report.docx">docx</a></li>
</ul>
<p>Please check out <code>pdf</code>, <code>docx</code>, <code>odt</code> and other formats (changing the above <code>convert</code> option) on your machine too and do not forget to <a href="https://github.com/daroczig/pander/issues">give some feedback</a>!</p>
<h1 id="live-report-generation">Live report generation</h1>
<p><code>pander</code> package has a special reference class called <code>Pandoc</code> which could collect some blocks in a live R session and export the whole document to Pandoc/pdf/HTML etc.</p>
<p>Without any serious comments, please check out the below (self-commenting) example:</p>
<pre class="sourceCode r"><code class="sourceCode r">## Initialize a new Pandoc object
myReport &lt;- Pandoc$<span class="kw">new</span>()

## Add author, title and date of document
myReport$author &lt;- <span class="st">&#39;Gergely Daróczi&#39;</span>
myReport$title  &lt;- <span class="st">&#39;Demo&#39;</span>

## Or it could be done while initializing
myReport &lt;- Pandoc$<span class="kw">new</span>(<span class="st">&#39;Gergely Daróczi&#39;</span>, <span class="st">&#39;Demo&#39;</span>)

## Add some free text
myReport$<span class="kw">add.paragraph</span>(<span class="st">&#39;Hello there, this is a really short tutorial!&#39;</span>)

## Add maybe a header for later stuff
myReport$<span class="kw">add.paragraph</span>(<span class="st">&#39;# Showing some raw R objects below&#39;</span>)

## Adding a short matrix
myReport$<span class="kw">add</span>(<span class="kw">matrix</span>(<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">5</span>))

## Or a table with even
myReport$<span class="kw">add.paragraph</span>(<span class="st">&#39;Hello table:&#39;</span>)
myReport$<span class="kw">add</span>(<span class="kw">table</span>(mtcars$am, mtcars$gear))

## Or a &quot;large&quot; data frame which barely fits on a page
myReport$<span class="kw">add</span>(mtcars)

## And a simple linear model with Anova tables
ml &lt;- <span class="kw">with</span>(<span class="kw">lm</span>(mpg ~ hp + wt), <span class="dt">data =</span> mtcars)
myReport$<span class="kw">add</span>(ml)
myReport$<span class="kw">add</span>(<span class="kw">anova</span>(ml))
myReport$<span class="kw">add</span>(<span class="kw">aov</span>(ml))

## And do some principal component analysis at last
myReport$<span class="kw">add</span>(<span class="kw">prcomp</span>(USArrests))

## Sorry, I did not show how Pandoc deals with plots:
myReport$<span class="kw">add</span>(<span class="kw">plot</span>(<span class="dv">1</span>:<span class="dv">10</span>))

## Want to see the report? Just print it:
myReport

## Exporting to pdf (default)
myReport$<span class="kw">export</span>()

## Or to docx in tempdir():
myReport$format &lt;- <span class="st">&#39;docx&#39;</span>
myReport$<span class="kw">export</span>(<span class="kw">tempfile</span>())

## You do not want to see the generated report after generation?
myReport$<span class="kw">export</span>(<span class="dt">open =</span> <span class="ot">FALSE</span>)</code></pre>
<h1 id="ess">ESS</h1>
<p>I have created some simple LISP functions which would be handy if you are using the best damn IDE for R. These functions and default key-bindings are <a href="https://github.com/daroczig/pander/tree/master/inst/pander.el">shipped with the package</a>, feel free to personalize.</p>
<p>As time passed these small functions grew heavier (with my Emacs knowledge) so I ended up with a small library:</p>
<h2 id="pander-mode">pander-mode</h2>
<p>I am currently working on <code>pander-mode</code> which is a small <em>minor-mode</em> for Emacs. There are a few (but useful) functions with default keybindings:</p>
<ul>
<li><code>pander-brew</code> (<code>C-c p b</code>): Run <code>Pandoc.brew</code> on current buffer or region (if mark is active), show results in <em>ess-output</em> and (optionally) copy results to clipboard while setting working directory to <code>tempdir()</code> temporary.</li>
<li><code>pander-brew-export</code> (<code>C-c p B</code>): Run <code>Pandoc.brew</code> on current buffer or region (if mark is active) and export results to specified (auto-complete in minibuffer) format. Also tries to open exported document.</li>
<li><code>pander-eval</code> (<code>C-c p e</code>): Run <code>pander</code> on (automatically evaluated) region <em>or</em> current chunk (if marker is not set), show results (of last returned R object) in <code>*ess-output*</code> and (optionally) copy those to clipboard while setting working directory to <code>tempdir()</code> temporary.</li>
</ul>
<p>Few options of <code>pander-mode</code>: <code>M-x customize-group pander</code></p>
<ul>
<li><code>pander-clipboard</code>: If non-nil then the result of <code>pander-*</code> functions would be copied to clipboard.</li>
<li><code>pander-show-source</code>: If non-nil then the source of R commands would also show up in generated documents while running 'pander-eval'. This would not affect <code>brew</code> functions ATM.</li>
</ul>
<p>To use this small lib, just type: <code>M-x pander-mode</code> on any document. It might be useful to add a hook to <code>markdown-mode</code> if you find this useful.</p>
<hr />
<p>This report was generated with <a href="http://www.r-project.org/">R</a> (2.15.0) and <a href="https://github.com/daroczig/pander">pander</a> (0.1) in 0.531 sec on x86_64-unknown-linux-gnu platform.</p>
<p align="center">
  Design: <a href="http://rapport-package.info/"><i>rapport</i> Development Team</a> &copy; 2012 | Backend: <a href="https://github.com/daroczig/pander">pander</a> | License: <a href="http://www.gnu.org/licenses/agpl.html" target="_blank">AGPL3</a> | Styled with <a href="http://www.getskeleton.com/" target="_blank">skeleton</a>
</p>
</body>
</html>
